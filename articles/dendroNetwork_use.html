<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dendroNetwork">
<title>dendroNetwork: how to use it • dendroNetwork</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="dendroNetwork: how to use it">
<meta property="og:description" content="dendroNetwork">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dendroNetwork</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/cytoscape.html">Cytoscape visualization</a>
    <a class="dropdown-item" href="../articles/dendroNetwork_use.html">dendroNetwork: how to use it</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/RonaldVisser/dendroNetwork/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="dendroNetwork_use_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="dendroNetwork_use_files/viz-1.8.2/viz.js"></script><link href="dendroNetwork_use_files/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="dendroNetwork_use_files/grViz-binding-1.0.11/grViz.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>dendroNetwork: how to use it</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/RonaldVisser/dendroNetwork/blob/HEAD/vignettes/dendroNetwork_use.Rmd" class="external-link"><code>vignettes/dendroNetwork_use.Rmd</code></a></small>
      <div class="d-none name"><code>dendroNetwork_use.Rmd</code></div>
    </div>

    
    
<p>dendroNetwork is a package to create dendrochronological networks for
gaining insight into provenance or other patterns based on the
statistical relations between tree ring curves. The code and the
functions are based on several published papers <span class="citation">(Visser 2021, 2021; Visser and Vorst 2022)</span></p>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>The package aims to make the creation of dendrochronological
(provenance) networks as easy as possible. To be able to make use of all
options, it is assumed that Cytoscape <span class="citation">(Shannon et
al. 2003)</span> is installed (<a href="https://cytoscape.org/" class="external-link uri">https://cytoscape.org/</a>). Some data is included in this
package, namely the Roman data published by Hollstein <span class="citation">(Hollstein 1980)</span>.</p>
<p>The first steps are visualized in the flowchart below, including
community detection using either (or both) the Girvan-Newman algorithm
<span class="citation">(Girvan and Newman 2002)</span> and Clique
Percolation Method <span class="citation">(Palla et al. 2005)</span> for
all clique sizes.</p>
<div class="grViz html-widget html-fill-item" id="htmlwidget-75dcaf7bb1838b3c75a4" style="width:480px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-75dcaf7bb1838b3c75a4">{"x":{"diagram":"\ndigraph {\n  # graph attributes\n  graph [overlap = true]\n  # node attributes\n  node [shape = box,\n        fontname = Helvetica,\n        color = gray]\n  # edge attributes\n  edge [color = black]\n  # node statements\n  1 [label = \"Load data\"]\n  2 [label = \"Create similarity table\"]\n  3 [label = \"Create network using default settings\"]\n  4 [label = \"Detect communities using the \n Girvan-Newman algorithm\"]\n  5 [label = \"Detect communities using the \n Clique Percolation Method\"]\n  # edge statements\n  1 ->  2\n  2 -> 3\n  3 -> 4\n  3 -> 5\n  }\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RonaldVisser/dendroNetwork" class="external-link">dendroNetwork</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">hol_rom</span><span class="op">)</span> <span class="co"># 1</span></span>
<span><span class="va">sim_table_hol</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_table.html">sim_table</a></span><span class="op">(</span><span class="va">hol_rom</span><span class="op">)</span> <span class="co"># 2</span></span>
<span><span class="va">g_hol</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dendro_network.html">dendro_network</a></span><span class="op">(</span><span class="va">sim_table_hol</span><span class="op">)</span> <span class="co"># 3</span></span>
<span><span class="va">g_hol_gn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gn_names.html">gn_names</a></span><span class="op">(</span><span class="va">g_hol</span><span class="op">)</span> <span class="co"># 4</span></span>
<span><span class="va">g_hol_cpm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/clique_community_names.html">clique_community_names</a></span><span class="op">(</span><span class="va">g_hol</span>, k<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="co"># 4</span></span>
<span><span class="va">hol_com_cpm_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_all_cpm_com.html">find_all_cpm_com</a></span><span class="op">(</span><span class="va">g_hol</span><span class="op">)</span> <span class="co"># 5</span></span>
<span><span class="co"># plotting the graph in R</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">g_hol</span><span class="op">)</span>  </span></code></pre></div>
<p><img src="dendroNetwork_use_files/figure-html/network_hollstein_1980-1.png" width="480"></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># better readable version</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">g_hol</span>, vertex.color<span class="op">=</span><span class="st">"deepskyblue"</span>, vertex.size<span class="op">=</span><span class="fl">15</span>, vertex.frame.color<span class="op">=</span><span class="st">"gray"</span>,</span>
<span>     vertex.label.color<span class="op">=</span><span class="st">"darkslategrey"</span>, vertex.label.cex<span class="op">=</span><span class="fl">0.8</span>, vertex.label.dist<span class="op">=</span><span class="fl">2</span><span class="op">)</span> </span></code></pre></div>
<p><img src="dendroNetwork_use_files/figure-html/network_hollstein_1980-2.png" width="480"></p>
<div class="section level3">
<h3 id="visualization_cytoscape">Visualization in Cytoscape<a class="anchor" aria-label="anchor" href="#visualization_cytoscape"></a>
</h3>
<p>After creating the network in R, it is possible to visualize the
network using Cytoscape. The main advantage is that visualisation in
Cytoscape is more easy, intuitive and visual. In addition, it is very
easy to automate workflows in Cytoscape with R (using <a href="https://bioconductor.org/packages/release/bioc/html/RCy3.html" class="external-link">RCy3</a>).
For this purpose we need to start Cytoscape firstly. After Cytoscape has
completely loaded, the next steps can be taken.</p>
<ol style="list-style-type: decimal">
<li>The network can now be loaded in Cytoscape for further
visualisation:
<code>cyto_create_graph(g_hol, CPM_table = hol_com_cpm_all, GN_table = g_hol_gn)</code>
</li>
<li>Styles for visualisation can now be generated. However, Cytoscape
comes with a lot of default styles that can be confusing. Therefore it
is recommended to use: <code><a href="../reference/cyto_clean_styles.html">cyto_clean_styles()</a></code> once in a
session.</li>
<li>To visualize the styles for CPM with only k=3:
<code>cyto_create_cpm_style(g_hol, k=3, com_k = g_hol_cpm)</code>
<ul>
<li>This can be repeated for all possible clique sizes. To find the
maximum clique size in a network, please use:
<code>igraph::clique_num(g_hol)</code>.</li>
<li>To automate this:
<code>for (i in 3:igraph::clique_num(g_hol)) { cyto_create_cpm_style(g_hol, k=i, com_k = g_hol_cpm)}</code>.</li>
</ul>
</li>
<li>To visualize the styles using the Girvan-Newman algorithm (GN):
<code>cyto_create_gn_style(g_hol)</code> This would look something like
this in Cytoscape:</li>
</ol>
<div class="float">
<img src="images/g_hol_GN.png" width="800" alt="The network of Roman sitechronologies with the Girvan-Newman communities visualized."><div class="figcaption">The network of Roman sitechronologies with the
Girvan-Newman communities visualized.</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="usage-for-large-datasets">Usage for large datasets<a class="anchor" aria-label="anchor" href="#usage-for-large-datasets"></a>
</h2>
<p>When using larger datasets calculating the table with similarities
can take a lot of time, but finding communities even more. It is
therefore recommended to use of parallel computing for Clique
Percolation:
<code>clique_community_names_par(network, k=3, n_core = 6)</code>. This
reduces the amount of time significantly.</p>
<p>The workflow is similar as above, but with minor changes:</p>
<ol style="list-style-type: decimal">
<li><p>load network</p></li>
<li><p>compute similarities</p></li>
<li><p>find the maximum clique size:
<code>igraph::clique_num(network)</code></p></li>
<li>
<p>detect communities for each clique size separately:</p>
<ul>
<li><p><code>com_cpm_k3 &lt;- clique_community_names_par(network, k=3, n_core = 6)</code>.</p></li>
<li><p><code>com_cpm_k4 &lt;- clique_community_names_par(network, k=4, n_core = 6)</code>.</p></li>
<li><p>and so on until the maximum clique size</p></li>
</ul>
</li>
<li><p>merge these into a single <code>data frame</code> by
<code>com_cpm_all &lt;- rbind(com_cpm_k3,com_cpm_k4, com_cpm_k5,... )</code></p></li>
<li><p>create table for use in cytoscape with all communities:
<code>com_cpm_all &lt;- com_cpm_all %&gt;% dplyr::count(node, com_name) %&gt;% tidyr::spread(com_name, n)</code></p></li>
<li><p>Continue with the visualisation in Cytoscape, see the previous <a href="#visualization_cytoscape">section on visualization in
Cytoscape</a></p></li>
</ol>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>If you use this software, please cite this using:</p>
<p>Visser, R. (2024). DendroNetwork: a R-package to create
dendrochronological provenance networks (Version 0.5.0) [Computer
software]. <a href="https://zenodo.org/doi/10.5281/zenodo.10636310" class="external-link uri">https://zenodo.org/doi/10.5281/zenodo.10636310</a></p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-girvan2002" class="csl-entry">
Girvan, M and Newman, MEJ. 2002 Community structure in social and
biological networks. <em>Proceedings of the National Academy of Sciences
of the United States of America</em> 99(12): 7821–7826. DOI:
https://doi.org/<a href="https://doi.org/10.1073/pnas.122653799" class="external-link">10.1073/pnas.122653799</a>.
</div>
<div id="ref-hollstein1980" class="csl-entry">
Hollstein, E. 1980. <em>Mitteleuropäische eichenchronologie. Trierer
dendrochronologische forschungen zur archäologie und
kunstgeschichte.</em> Trierer grabungen und forschungen 11. Mainz am
Rhein: Verlag Philipp von Zabern.
</div>
<div id="ref-palla2005" class="csl-entry">
Palla, G, Derenyi, I, Farkas, I and Vicsek, T. 2005 Uncovering the
overlapping community structure of complex networks in nature and
society. <em>Nature</em> 435(7043): 814–818. DOI: https://doi.org/<a href="https://doi.org/10.1038/nature03607" class="external-link">10.1038/nature03607</a>.
</div>
<div id="ref-shannon2003" class="csl-entry">
Shannon, P, Markiel, A, Ozier, O, Baliga, NS, Wang, JT, Ramage, D, Amin,
N, Schwikowski, B and Ideker, T. 2003 Cytoscape: A software environment
for integrated models of biomolecular interaction networks. <em>Genome
Research</em> 13(11): 2498–2504. DOI: https://doi.org/<a href="https://doi.org/10.1101/gr.1239303" class="external-link">10.1101/gr.1239303</a>.
</div>
<div id="ref-visser2021" class="csl-entry">
Visser, RM. 2021 Dendrochronological Provenance Patterns. Network
Analysis of Tree-Ring Material Reveals Spatial and Economic Relations of
Roman Timber in the Continental North-Western Provinces. <em>Journal of
Computer Applications in Archaeology</em> 4(1): 230–253. DOI:
https://doi.org/<a href="https://doi.org/10.5334/jcaa.79" class="external-link">10.5334/jcaa.79</a>.
</div>
<div id="ref-visser2022" class="csl-entry">
Visser, RM and Vorst, Y. 2022 Connecting Ships: Using
Dendrochronological Network Analysis to Determine the Wood Provenance of
Roman-Period River Barges Found in the Lower Rhine Region and Visualise
Wood Use Patterns. <em>International Journal of Wood Culture</em>
3(1-3): 123–151. DOI: https://doi.org/<a href="https://doi.org/10.1163/27723194-bja10014" class="external-link">10.1163/27723194-bja10014</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Ronald Visser.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
